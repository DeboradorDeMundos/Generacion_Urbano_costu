---
import Nav from "./Nav.astro";

export interface Props {
  transparent?: boolean;
}

const { transparent = false } = Astro.props;
---

<header
  class:list={[
    "fixed top-0 z-40 w-full transition-all duration-300 border-b border-red-600/30",
    transparent
      ? "bg-black/90 backdrop-blur-md"
      : "bg-black shadow-lg shadow-red-600/20",
  ]}
  id="main-header"
  style="box-shadow: 0 0 20px rgba(220, 38, 38, 0.3);"
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex h-16 lg:h-20 items-center justify-between">
      <!-- Logo Section -->
      <div class="flex items-center group">
        <a
          href="/"
          class="flex items-center space-x-3 transition-all duration-300 hover:scale-105"
        >
          <!-- Logo Container -->
          <div
            class="relative w-12 h-12 lg:w-16 lg:h-16 bg-white rounded-full flex items-center justify-center shadow-lg transition-all duration-300"
            style="box-shadow: 0 0 15px rgba(255, 255, 255, 0.5), 0 0 30px rgba(220, 38, 38, 0.3);"
          >
            <img
              src="/images/generacion_urbana.jpg"
              alt="Generación Urbana - Logo"
              class="w-10 h-10 lg:w-14 lg:h-14 object-cover rounded-full"
              loading="eager"
            />
          </div>

          <!-- Brand Text -->
          <div class="hidden sm:block">
            <h1
              class="text-lg lg:text-xl font-bold text-white leading-tight"
              style="text-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px rgba(220, 38, 38, 0.5);"
            >
              Generación Urbano
            </h1>
          </div>
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center space-x-8">
        <Nav />
        <a
          href="/diseña_aqui"
          class="px-6 py-2.5 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105 relative"
          style="box-shadow: 0 0 15px rgba(220, 38, 38, 0.6), 0 0 30px rgba(220, 38, 38, 0.4); text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);"
        >
          Diseña Aquí
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <div class="lg:hidden">
        <button
          type="button"
          class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center text-white hover:bg-white/20 transition-colors"
          aria-controls="mobile-menu"
          aria-expanded="false"
          id="mobile-menu-button"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    class="lg:hidden fixed inset-0 z-50 opacity-0 invisible transition-all duration-300 transform translate-y-4"
    id="mobile-menu-overlay"
  >
    <div
      class="absolute inset-0 bg-black/80 backdrop-blur-sm"
      id="mobile-backdrop"
    >
    </div>

    <div class="relative bg-black border-t border-red-600/20 pt-20 pb-8 px-6">
      <div class="space-y-6">
        <a
          href="/"
          class="block text-white text-lg font-semibold hover:text-red-400 transition-colors py-2"
        >
          Inicio
        </a>
        <a
          href="/diseña_aqui"
          class="block text-white text-lg font-semibold hover:text-red-400 transition-colors py-2"
        >
          Diseña Aquí
        </a>
        <a
          href="/contacto"
          class="block text-white text-lg font-semibold hover:text-red-400 transition-colors py-2"
        >
          Contacto
        </a>
      </div>
    </div>
  </div>
</header>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const button = document.getElementById("mobile-menu-button");
    const menu = document.getElementById("mobile-menu-overlay");
    const backdrop = document.getElementById("mobile-backdrop");

    if (button && menu) {
      button.addEventListener("click", () => {
        const expanded = button.getAttribute("aria-expanded") === "true";
        button.setAttribute("aria-expanded", (!expanded).toString());

        if (!expanded) {
          menu.classList.remove("opacity-0", "invisible", "translate-y-4");
          menu.classList.add("opacity-100", "visible", "translate-y-0");
        } else {
          menu.classList.add("opacity-0", "invisible", "translate-y-4");
          menu.classList.remove("opacity-100", "visible", "translate-y-0");
        }
      });
    }

    // Close menu when clicking backdrop
    if (backdrop && menu && button) {
      backdrop.addEventListener("click", () => {
        menu.classList.add("opacity-0", "invisible", "translate-y-4");
        menu.classList.remove("opacity-100", "visible", "translate-y-0");
        button.setAttribute("aria-expanded", "false");
      });
    }
  });
</script>
