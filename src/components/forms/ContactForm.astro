---
// Contact form component with validation
---

<form class="space-y-6" id="contact-form">
  <!-- Nombre completo -->
  <div>
    <label for="name" class="block text-sm font-medium text-gray-700 mb-2">
      Nombre completo *
    </label>
    <input
      type="text"
      id="name"
      name="name"
      required
      class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
      placeholder="Tu nombre completo"
    />
  </div>

  <!-- Email -->
  <div>
    <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
      Correo electrónico *
    </label>
    <input
      type="email"
      id="email"
      name="email"
      required
      class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
      placeholder="tu@email.com"
    />
  </div>

  <!-- Teléfono -->
  <div>
    <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
      Teléfono
    </label>
    <input
      type="tel"
      id="phone"
      name="phone"
      class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
      placeholder="+56 9 XXXX XXXX"
    />
  </div>

  <!-- Tipo de servicio -->
  <div>
    <label for="service" class="block text-sm font-medium text-gray-700 mb-2">
      Tipo de servicio *
    </label>
    <select
      id="service"
      name="service"
      required
      class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
    >
      <option value="">Selecciona un servicio</option>
      <option value="costura-industrial">Costura Industrial</option>
      <option value="bordados-empresariales">Bordados Empresariales</option>
      <option value="poleron-urbano">Polerón Urbano</option>
      <option value="chaqueta-work">Chaqueta de Trabajo</option>
      <option value="uniformes">Uniformes Corporativos</option>
      <option value="otro">Otro</option>
    </select>
  </div>

  <!-- Mensaje -->
  <div>
    <label for="message" class="block text-sm font-medium text-gray-700 mb-2">
      Mensaje *
    </label>
    <textarea
      id="message"
      name="message"
      rows="4"
      required
      class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
      placeholder="Cuéntanos sobre tu proyecto. Incluye detalles como cantidad, medidas, colores, etc."
    ></textarea>
  </div>

  <!-- Términos y condiciones -->
  <div class="flex items-start">
    <div class="flex items-center h-5">
      <input
        id="terms"
        name="terms"
        type="checkbox"
        required
        class="focus:ring-primary-500 h-4 w-4 text-primary-600 border-gray-300 rounded"
      />
    </div>
    <div class="ml-3 text-sm">
      <label for="terms" class="text-gray-600">
        Acepto los 
        <a href="/terminos" class="text-primary-600 hover:text-primary-500 underline">
          términos y condiciones
        </a> 
        y 
        <a href="/privacidad" class="text-primary-600 hover:text-primary-500 underline">
          política de privacidad
        </a> *
      </label>
    </div>
  </div>

  <!-- Submit button -->
  <div>
    <button
      type="submit"
      class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"
      id="submit-btn"
    >
      <span id="submit-text">Enviar mensaje</span>
      <span id="submit-loading" class="hidden">
        <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        Enviando...
      </span>
    </button>
  </div>

  <!-- Success/Error messages -->
  <div id="form-message" class="hidden p-4 rounded-md"></div>
</form>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;
    const submitText = document.getElementById('submit-text') as HTMLElement;
    const submitLoading = document.getElementById('submit-loading') as HTMLElement;
    const messageDiv = document.getElementById('form-message') as HTMLElement;

    if (form) {
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        // Show loading state
        submitBtn.disabled = true;
        submitText.classList.add('hidden');
        submitLoading.classList.remove('hidden');
        messageDiv.classList.add('hidden');

        try {
          const formData = new FormData(form);
          
          // Here you would typically send to your backend
          // For now, we'll simulate a successful submission
          await new Promise(resolve => setTimeout(resolve, 2000));
          
          // Show success message
          messageDiv.className = 'p-4 rounded-md bg-green-50 border border-green-200 text-green-800';
          messageDiv.textContent = '¡Mensaje enviado exitosamente! Te contactaremos pronto.';
          messageDiv.classList.remove('hidden');
          
          // Reset form
          form.reset();
          
        } catch (error) {
          // Show error message
          messageDiv.className = 'p-4 rounded-md bg-red-50 border border-red-200 text-red-800';
          messageDiv.textContent = 'Error al enviar el mensaje. Por favor intenta nuevamente.';
          messageDiv.classList.remove('hidden');
        } finally {
          // Reset button state
          submitBtn.disabled = false;
          submitText.classList.remove('hidden');
          submitLoading.classList.add('hidden');
        }
      });
    }
  });
</script>