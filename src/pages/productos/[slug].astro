---
import { getCollection } from 'astro:content';
import ProductLayout from '../../layouts/ProductLayout.astro';

export async function getStaticPaths() {
  const products = await getCollection('products');
  return products.map((product) => ({
    params: { slug: product.slug },
    props: { product },
  }));
}

const { product } = Astro.props;
const { Content } = await product.render();

const breadcrumbs = [
  { label: "Productos", href: "/productos" },
  { label: product.data.title, href: `/productos/${product.slug}` }
];
---

<ProductLayout
  title={product.data.seo?.title || product.data.title}
  description={product.data.seo?.description || product.data.description}
  image={product.data.image}
  price={product.data.price}
  category={product.data.category}
  features={product.data.features}
  gallery={product.data.gallery}
  specifications={product.data.specifications}
  breadcrumbs={breadcrumbs}
>
  <Content />
</ProductLayout>